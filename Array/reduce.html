<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>reduce</title>
</head>
<body>
<script>
    /*
    * 接受两个参数：
    * - 前一项pre，当前项item，项索引index，数组对象array
    * - 归并基础的可选值
    *
    * */
    Array.prototype.makeReduce = function makeReduce(fn,context) {
        if (typeof fn !== "function")
            throw new TypeError('arguments[0] is not a function');
        let array = this;
        let arr  = array.slice()
        if (context)
            arr.unshift(context)
        let index;
        while (arr.length >2 ){
            let newValue = fn(arr[0],arr[1],index,array);
            index = array.length - arr.length + 1;
            arr.splice(0,2);
            arr.unshift(newValue);
        }
        index += 1;
        let result = fn(arr[0],arr[1],index,array);
        return result;
    }

    let arr = [1, 2, 3, 4, 5];
    let sum = arr.makeReduce((prev, cur, index, arr) => {
        return prev * cur;
    },10);

    console.log(sum);

    let array = [2,3,4,1,4,2,1,2,2,3,8];
    let array_sum = array.reduce((pre,cur)=>{
        return pre*cur
    })
    console.log(array_sum)
</script>
</body>
</html>